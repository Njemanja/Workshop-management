<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<script src='https://kit.fontawesome.com/a076d05399.js' crossorigin='anonymous'></script>
    
<title>Moj profil</title>
</head>
<body>
    <header>
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark" style="margin-bottom: 20px;">
          <div class="container">
            <div class="collapse navbar-collapse" id="navbarNav">
              <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                  <a class="nav-link" href="user">Nazad</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="">Logout</a>
                </li>
              </ul>
            </div>
          </div>
        </nav>
    </header>
    <div class="container" style="width: 100%;">
        <div style="text-align: right" class="row">
            <div class="col-lg-8">
                <table align="right" width="100%;">
                    <tr>
                        <td style="width: 50%;" >
                            <div class="active" style="background-color: black; color:white; text-align: center;"><h2>Istorija radionica</h2></div>
            
                            <table align="center" *ngFor="let r of mojeRadionice"  cellspacing="10" cellpadding="15px">
                                <tr align="center" >
                                   <td align="center" colspan="5">
                                    <img [src]="r.slika" height="300px" width="700px">
                                   </td>
                                </tr>
                                <tr>
                                    <th>Naziv</th>
                                    <th>Datum radionice</th>
                                    <th>Mesto odrzavanja</th>
                                    <th>Opis</th>
                                    <th>Broj lajkova</th>
                                </tr>
                                <tr style="text-align: center;">
                                    <td>{{r.naziv}}</td>
                                    <td>{{r.datum | date:"dd.MM.yyyy. HH:mm"}}</td>
                                    <td>{{r.mesto}}</td>
                                    <td>{{r.opis}}</td>
                                    <td>{{r.brojLajkova}}</td>
                                </tr>  
                                <tr>
                                    <td colspan="5">
                                        <hr/>  
                                    </td>
                                </tr>      
                            </table>
                             <table align="center">
                                <tr>
                                    <td>
                                        <button (click)="sortirajDatum()">Sortiraj po datumu</button>
                                    </td>
                                    <td>
                                        <button (click)="sortirajMesto()">Sortiraj po mestu</button>
                                    </td>
                                    <td>
                                        <button (click)="sortirajNaziv()">Sortiraj po nazivu</button>

                                    </td>
                                    <td>
                                        <button (click)="sortirajBrojLajkova()">Sortiraj po broju lajkova</button>

                                    </td>
                                </tr>

                             </table>
                        </td>
                    </tr>
                </table>
            </div>
            <div class="col-lg-4" style="text-align: left;">
                <div class="active" style="background-color: black; color:white; text-align: center;"><h2>Podaci</h2></div>
                <img [src]="slika" height="150px" width="150px">
                <p><b>Ime:</b> {{ime}} </p>
                <p ><b>Prezime:</b> {{prezime}}</p>
                <p><b>Korisnicko ime:</b> {{korisnickoIme}}</p>
                <p><b>Telefon:</b> {{telefon}}</p>
                <p><b>Email adresa:</b> {{email}}</p>
                <hr/>
                <a href="user/profil/azuriranjePodataka"> Azuriraj podatke </a>
                <hr/>
            </div>
        </div>
    </div>
   
    <hr/>
    <div class="container" style="width: 100%;">
        <div style="text-align: right" class="row">
            <div class="col-lg-8">
                <div class="active" style="background-color: black; color:white; text-align: center;"><h2>Komentari</h2></div>
                <table  align="center" cellpadding="20px" width="100%">
                    
                    <tr>
                        <th>
                            Naziv radionice
                        </th>
                        <th align="left">
                            Moji komentari
                        </th>
                    </tr>
                    <tr *ngFor="let kom of mojiKomentar" style="border-bottom: solid black;"> 
                        <td  align="center" style="border-right: solid black;">{{kom.naziv}}</td>
                        <td>
                            <table *ngFor="let k of kom.tekst" width="100%">
                                <tr style="text-align: left; word-break: break-word;">
                                   <div  style=" max-width: 300px;max-height: 150px;overflow-y: auto;">
                                    <td>{{k}}</td>
                                   </div>
                                    <td align="right"><button (click)="azurirajKomentar(kom.idR,k)" class="fa fa-edit"></button><button (click)="obrisiKomentar(kom.idR,k)" class="fa fa-trash"></button></td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                    
                    
                    <tr>
                        <td colspan="2" align="center">
                            <div class="active" style="background-color: black; color:white; text-align: center;"><h2>Azuriranje komentara</h2></div>

                            <hr/>
                            <input [(ngModel)]="noviKomentar"> <hr/>
                        </td>
                    </tr>
                </table>
            </div>
            <div class="col-lg-4">
                <div class="active" style="background-color: black; color:white; text-align: center;"><h2>Lajkovi</h2></div>
                <table *ngFor="let radionica of lajkovaneRadionice" align="center"  cellpadding="10px">
                    <tr>
                        <th >Naziv radionice</th>
                    </tr>
                    <tr>
                        <td>{{radionica.naziv}}</td>
                        <td><button (click)="obrisiLajk(radionica.id)">Obrisi</button></td>
                    </tr>
                    <tr>
                        <td colspan="2"><hr/></td>
                    </tr>
                </table>

            </div>
        </div>
        <hr/>
        <div class="active" style="background-color: black; color:white; text-align: center;"><h2>Poruke</h2></div>

        <div class="row">
                <div class="col-lg-5"  *ngFor="let p of poruke; let i = index " style="align-content: center;border: solid black; float: left; overflow:auto; height: 250px; margin: 20px; position: relative;">
                    <div style="text-align: center; background-color: gray; color: white;
                    font-size: large; border-radius: 150px;
                    ">{{p.korisnickoIme2}}</div>
                    <table *ngFor="let p1 of p.poruke " [ngClass]=" (p1.from == p.korisnickoIme1) ? 'left' : 'right'" >
                        
                        <tr>
                            <td>
                                <table >
                                    <tr>
                                        <td *ngIf=" p1.from == p.korisnickoIme1" ><img [src]="p.slika1" height="45px" width="45px" style=" border-radius: 50%;"></td>
                                        <td>
                                            <table>
                                                <tr><td> <div *ngIf=" p1.from == p.korisnickoIme1"><b>Ja</b>,   {{p1.datum | date:"dd.MM.yyyy. HH:mm"}}</div>
                                                    <div *ngIf=" p1.from == p.korisnickoIme2"><b>{{p.korisnickoIme2}}</b>,  {{p1.datum | date:"dd.MM.yyyy. HH:mm"}}</div>
                                                </td></tr>
                                                <tr style="word-break: break-word; ">
                                                    <td class="jednaPoruka">{{p1.poruka}}</td>
                                                
                                                </tr>
                                            </table>
                                        </td>
                                        <td *ngIf=" p1.from == p.korisnickoIme2"><img [src]="p.slika2" height="45px" width="45px" style=" border-radius: 50%;"></td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                    </table>
                    <table  style="margin-left:0;margin-right:0; border-top: solid black; overflow: hidden; " width="100%" >
                        <tr >
                                <td>Poruka:
                                    <input [(ngModel)]="dataNew[i]" name="key_{{i}}" type="text">
                                </td>
                                <td align="right"><button (click)="posaljiPoruku(p.idRad, i)">Posalji</button></td>
                            </tr>
                    </table>
               </div>
        </div>

    </div>
    <footer class="bg-dark text-white p-4" style="padding-top: 20px;">
        <div class="container">
          <div class="row">
            <div class="col-md-12">
              <p class="text-center" >Elektrotehnicki fakultet, Univerzitet u Beogradu 2023.</p>
            </div>
          </div>
        </div>
      </footer>
    
</body>
</html>
